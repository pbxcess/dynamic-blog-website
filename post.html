<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>View Post</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="post-view"></div>
  <a href="index.html">Back to Home</a>

  <script>
    const postId = Number(window.location.hash.slice(1));
    const posts = JSON.parse(localStorage.getItem("posts")) || [];
    const post = posts.find(p => p.id === postId);

    const container = document.getElementById("post-view");

    if (!post) {
      container.innerHTML = "<p>Post not found.</p>";
    } else {
      container.innerHTML = `
        <h1 contenteditable="true" id="edit-title">${post.title}</h1>
        <textarea id="edit-content">${post.content}</textarea><br>
        ${post.image ? `<img src="${post.image}" alt="Post Image" style="max-width: 100%; margin-top: 12px;"><br>` : ""}
        <button id="save">Save Changes</button>
        <button id="delete">Delete Post</button>
      `;

      //save feature
      document.getElementById("save").onclick = () => {
        post.title = document.getElementById("edit-title").innerText.trim();
        post.content = document.getElementById("edit-content").value.trim();
        localStorage.setItem("posts", JSON.stringify(posts));
        alert("Changes saved!");
      };

      //delete feature
      document.getElementById("delete").onclick = () => {
        const updatedPosts = posts.filter(p => p.id !== postId);
        localStorage.setItem("posts", JSON.stringify(updatedPosts));
        window.location.href = "index.html";
      };
    }
  </script>
</body>
</html>
